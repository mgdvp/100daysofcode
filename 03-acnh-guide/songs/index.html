<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>ACNH Guide - Songs</title>
	<style>
		body{text-align: center;font-family: 'Roboto', sans-serif;background-color: #101010;color: #eee;margin: 0;}
		.nav, .about{width: 100%;text-align: left;background-color: #27ae60B3;padding: 0.5rem;box-sizing: border-box;}
		.content{margin: 2rem 0;}
		table {font-family: 'Roboto', sans-serif;border-collapse: collapse;margin: 0 auto;font-size: 15px;width: 80%;}
		table img{width: 100px;}
		td, th {border: 1px solid #606060;text-align: left;padding: 4px 8px;background-color: #121212;}
		h2, h3{font-weight: normal;margin: 0.5rem;}
		.about{font-size: 80%;text-align: center;}
	</style>
</head>
<body>
	<main>
		<div class="nav">
			<h2>ACNH Guide</h2>
		</div>
		<div class="content">
			<h3>Songs</h3>
			<table id="table">
				<tr>
					<th>No</th>
					<th>Image</th>
					<th>Name</th>
					<th>Price</th>
					<th>Play it!</th>
				</tr>
			</table>
		</div>
		<div class="about">
			<h3>ACNH Guide</h3>
			<p>mgdvp - acnhapi.com &copy 2022</p>
			<p>this app uses 3rd party api of acnhapi. data doesn't belong to us.</p>
		</div>
	</main>
<script>
	const table = document.getElementById('table');
	const td = table.getElementsByTagName('td');
	const th = table.getElementsByTagName('th');
	fetch('https://acnhapi.com/v1/songs')
	.then(res => res.json())
	.then(json => {
		console.log(json);
		const data = Object.values(json).filter(n => n = 'z');
		console.log(data);

		for(let i = 0; i < data.length; i++){
			const ntr = document.createElement('tr');
			const no = document.createElement('td');
			const imagetd = document.createElement('td');
			const image = document.createElement('img');
			const name = document.createElement('td');
			const price = document.createElement('td');
			const playittd = document.createElement('td');
			const playit = document.createElement('audio');
			const playitsource = document.createElement('source');
			no.innerHTML = i;
			image.src = data[i].image_uri;
			name.innerHTML = data[i].name['name-USen']
			price.innerHTML = data[i]['buy-price'];
			table.appendChild(ntr);
			ntr.appendChild(no);
			ntr.appendChild(imagetd);
			imagetd.appendChild(image);
			ntr.append(name, price, playittd);
			playittd.appendChild(playit);
			playit.controls = true;
			playit.appendChild(playitsource);
			playitsource.src = data[i].music_uri;
		}
	});
</script>
</body>
</html>